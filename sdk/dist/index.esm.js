class e{constructor(){this.STORAGE_KEY="web_monitor_queue",this.TIMER_KEY="web_monitor_timer",this.MAX_STORAGE_SIZE=1048576}save(e){if(!this.isLocalStorageAvailable())return!1;try{const t=JSON.stringify(e);return t.length>this.MAX_STORAGE_SIZE?(console.warn("WebMonitorSDK: Data too large for localStorage"),!1):(localStorage.setItem(this.STORAGE_KEY,t),!0)}catch(e){return console.warn("WebMonitorSDK: Failed to save to localStorage:",e),!1}}load(){if(!this.isLocalStorageAvailable())return[];try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.warn("WebMonitorSDK: Failed to load from localStorage:",e),this.clear(),[]}}clear(){if(this.isLocalStorageAvailable())try{localStorage.removeItem(this.STORAGE_KEY)}catch(e){console.warn("WebMonitorSDK: Failed to clear localStorage:",e)}}isLocalStorageAvailable(){try{const e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}getStorageSize(){if(!this.isLocalStorageAvailable())return 0;try{const e=localStorage.getItem(this.STORAGE_KEY);return e?e.length:0}catch(e){return 0}}saveLastReportTime(e){if(!this.isLocalStorageAvailable())return!1;try{return localStorage.setItem(this.TIMER_KEY,e.toString()),!0}catch(e){return console.warn("WebMonitorSDK: Failed to save timer to localStorage:",e),!1}}getLastReportTime(){if(!this.isLocalStorageAvailable())return 0;try{const e=localStorage.getItem(this.TIMER_KEY);return e?parseInt(e,10):0}catch(e){return console.warn("WebMonitorSDK: Failed to load timer from localStorage:",e),0}}clearTimer(){if(this.isLocalStorageAvailable())try{localStorage.removeItem(this.TIMER_KEY)}catch(e){console.warn("WebMonitorSDK: Failed to clear timer from localStorage:",e)}}getRawData(){if(!this.isLocalStorageAvailable())return null;try{return localStorage.getItem(this.STORAGE_KEY)}catch(e){return console.warn("WebMonitorSDK: Failed to get raw data from localStorage:",e),null}}getDebugInfo(){const e=this.load(),t=this.getRawData();return{hasData:e.length>0,dataCount:e.length,storageSize:t?t.length:0,lastReportTime:this.getLastReportTime(),data:e.length>0?e:null}}logStorageData(){const e=this.getDebugInfo();if(console.group("ğŸ“¦ WebMonitorSDK Storage Debug Info"),console.log("ğŸ“Š æ•°æ®ç»Ÿè®¡:"),console.log("  â€¢ æ˜¯å¦æœ‰æ•°æ®: "+(e.hasData?"âœ…":"âŒ")),console.log(`  â€¢ æ•°æ®æ¡æ•°: ${e.dataCount}`),console.log(`  â€¢ å­˜å‚¨å¤§å°: ${(e.storageSize/1024).toFixed(2)} KB`),e.lastReportTime>0){const t=new Date(e.lastReportTime);console.log(`  â€¢ ä¸Šæ¬¡ä¸ŠæŠ¥: ${t.toLocaleString()}`)}else console.log("  â€¢ ä¸Šæ¬¡ä¸ŠæŠ¥: æš‚æ— è®°å½•");e.data&&e.data.length>0&&(console.log("ğŸ“‹ å­˜å‚¨çš„æ•°æ®:"),e.data.forEach((e,t)=>{console.log(`  ${t+1}. [${e.type}] ${new Date(e.timestamp).toLocaleString()}`),console.log("     ",e)})),console.groupEnd()}}class t{constructor(t){var o,r,n,i,a,s,l,c,u;this.dataQueue=[],this.reportTimer=null,this.isDestroyed=!1,this.pendingRequests=0,this.retryQueue=[],this.options={url:t.url,timeout:null!==(o=t.timeout)&&void 0!==o?o:5e3,withCredentials:null!==(r=t.withCredentials)&&void 0!==r&&r,headers:null!==(n=t.headers)&&void 0!==n?n:{},reportInterval:null!==(i=t.reportInterval)&&void 0!==i?i:6e4,batchSize:null!==(a=t.batchSize)&&void 0!==a?a:10,maxQueueSize:null!==(s=t.maxQueueSize)&&void 0!==s?s:100,enableImmediateReport:null===(l=t.enableImmediateReport)||void 0===l||l,retryCount:null!==(c=t.retryCount)&&void 0!==c?c:3,retryInterval:null!==(u=t.retryInterval)&&void 0!==u?u:1e3},this.storageManager=new e,this.loadDataFromStorage(),this.startReportTimer(),this.setupBeforeUnload(),this.startRetryTimer()}loadDataFromStorage(){const e=this.storageManager.load();this.dataQueue.push(...e),this.storageManager.clear()}saveDataToStorage(){this.dataQueue.length>0&&this.storageManager.save(this.dataQueue)}startReportTimer(){const e=Date.now(),t=this.storageManager.getLastReportTime();let o=this.options.reportInterval;if(t>0){const r=e-t;o=r<this.options.reportInterval?this.options.reportInterval-r:0}o<=0&&(this.processQueuedData(),o=this.options.reportInterval),this.reportTimer=window.setInterval(()=>{this.processQueuedData()},this.options.reportInterval),o!==this.options.reportInterval&&setTimeout(()=>{this.processQueuedData()},o)}startRetryTimer(){setInterval(()=>{this.processRetryQueue()},this.options.retryInterval)}setupBeforeUnload(){window.addEventListener("beforeunload",()=>{this.saveDataToStorage(),this.flushAllQueues()}),window.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(this.saveDataToStorage(),this.flushAllQueues())})}flushAllQueues(){this.dataQueue.length>0&&(this.trySendBeacon(this.dataQueue),this.dataQueue=[])}send(e){this.isDestroyed||(this.dataQueue.push(e),this.checkQueueOverflow())}processQueuedData(){if(this.isDestroyed||this.pendingRequests>3)return;const e=this.dataQueue.length>0;if(this.dataQueue.length>0){const e=this.dataQueue.splice(0,this.options.batchSize);this.sendBatch(e),this.storageManager.saveLastReportTime(Date.now())}e&&this.storageManager.clear()}sendBatch(e){if(this.isDestroyed)return;this.pendingRequests++;const t=JSON.stringify(e),o=this.sendFetch(t).catch(()=>this.sendXHR(t));Promise.resolve(o).then(()=>{var t;this.pendingRequests--,(null===(t=this.options.headers)||void 0===t?void 0:t.debug)&&console.log(`æ•°æ®ä¸ŠæŠ¥æˆåŠŸ: ${e.length} æ¡æ•°æ®`)}).catch(()=>{this.pendingRequests--,this.addToRetryQueue(e)})}trySendBeacon(e){if(!navigator.sendBeacon)return null;try{const t=JSON.stringify(e),o=new Blob([t],{type:"application/json"});return navigator.sendBeacon(this.options.url,o)?Promise.resolve():Promise.reject(new Error("SendBeacon failed"))}catch(e){return Promise.reject(e)}}checkQueueOverflow(){this.dataQueue.length>=this.options.maxQueueSize&&this.processQueuedData()}addToRetryQueue(e){const t={data:e,retryCount:0,nextRetryTime:Date.now()+this.options.retryInterval};this.retryQueue.push(t)}processRetryQueue(){if(0===this.retryQueue.length||this.pendingRequests>3)return;const e=Date.now();this.retryQueue.filter(t=>e>=t.nextRetryTime).forEach(t=>{if(t.retryCount<this.options.retryCount)t.retryCount++,t.nextRetryTime=e+this.options.retryInterval*Math.pow(2,t.retryCount),this.sendBatch(t.data);else{const e=this.retryQueue.indexOf(t);e>-1&&this.retryQueue.splice(e,1)}})}async sendFetch(e){const t=new AbortController,o=setTimeout(()=>t.abort(),this.options.timeout);try{await fetch(this.options.url,{method:"POST",headers:{"Content-Type":"application/json",...this.options.headers},body:e,credentials:this.options.withCredentials?"include":"omit",signal:t.signal})}finally{clearTimeout(o)}}sendXHR(e){const t=new XMLHttpRequest;t.open("POST",this.options.url,!0),t.timeout=this.options.timeout,t.withCredentials=this.options.withCredentials,t.setRequestHeader("Content-Type","application/json"),Object.entries(this.options.headers).forEach(([e,o])=>{t.setRequestHeader(e,o)}),t.onerror=()=>{},t.ontimeout=()=>{};try{t.send(e)}catch(e){}}destroy(){this.isDestroyed=!0,this.reportTimer&&(clearInterval(this.reportTimer),this.reportTimer=null),this.flushAllQueues(),this.retryQueue=[],this.storageManager.clearTimer()}getQueueStatus(){return{queue:this.dataQueue.length,retry:this.retryQueue.length,pending:this.pendingRequests}}flush(){this.processQueuedData()}getStorageManager(){return this.storageManager}getDebugInfo(){return{isDestroyed:this.isDestroyed,queueStatus:this.getQueueStatus(),storageInfo:this.storageManager.getDebugInfo(),options:{...this.options}}}logDebugInfo(){const e=this.getDebugInfo();if(console.group("ğŸš€ WebMonitorSDK Transport Debug Info"),console.log("ğŸ“ˆ ä¼ è¾“å™¨çŠ¶æ€:"),console.log("  â€¢ æ˜¯å¦å·²é”€æ¯: "+(e.isDestroyed?"âœ…":"âŒ")),console.log(`  â€¢ å†…å­˜é˜Ÿåˆ—: ${e.queueStatus.queue} æ¡`),console.log(`  â€¢ é‡è¯•é˜Ÿåˆ—: ${e.queueStatus.retry} æ¡`),console.log(`  â€¢ æ­£åœ¨å‘é€: ${e.queueStatus.pending} ä¸ªè¯·æ±‚`),console.log("âš™ï¸ é…ç½®ä¿¡æ¯:"),console.log(`  â€¢ ä¸ŠæŠ¥é—´éš”: ${e.options.reportInterval/1e3}s`),console.log(`  â€¢ æ‰¹é‡å¤§å°: ${e.options.batchSize} æ¡`),console.log(`  â€¢ é˜Ÿåˆ—ä¸Šé™: ${e.options.maxQueueSize} æ¡`),console.log(`  â€¢ é‡è¯•æ¬¡æ•°: ${e.options.retryCount} æ¬¡`),console.log("ğŸ’¾ å­˜å‚¨çŠ¶æ€:"),console.log("  â€¢ æœ¬åœ°ç¼“å­˜: "+(e.storageInfo.hasData?"âœ…":"âŒ")),console.log(`  â€¢ ç¼“å­˜æ¡æ•°: ${e.storageInfo.dataCount} æ¡`),console.log(`  â€¢ ç¼“å­˜å¤§å°: ${(e.storageInfo.storageSize/1024).toFixed(2)} KB`),e.storageInfo.lastReportTime>0){const t=new Date(e.storageInfo.lastReportTime),o=Date.now()-e.storageInfo.lastReportTime;console.log(`  â€¢ ä¸Šæ¬¡ä¸ŠæŠ¥: ${t.toLocaleString()} (${Math.round(o/1e3)}så‰)`)}console.groupEnd(),e.storageInfo.hasData&&console.log("ğŸ’¡ æç¤º: ä½¿ç”¨ monitor.transport.getStorageManager().logStorageData() æŸ¥çœ‹è¯¦ç»†ç¼“å­˜æ•°æ®")}}function o(e){const t=[];let o=e;for(;o&&o.nodeType===Node.ELEMENT_NODE;){let e=o.nodeName.toLowerCase();if(o.id){e+=`#${o.id}`,t.unshift(e);break}{let t=1,r=o.previousElementSibling;for(;r;)r.nodeName.toLowerCase()===e&&t++,r=r.previousElementSibling;t>1&&(e+=`:nth-child(${t})`)}t.unshift(e),o=o.parentElement}return t.join(" > ")}function r(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return e&&(e.effectiveType||e.type)||"unknown"}class n{constructor(e){this.breadcrumbs=[],this.plugins=new Map,this.isDestroyed=!1,this.config=this.mergeConfig(e),this.sessionId=function(){const e=localStorage.getItem("web_monitor_session_id");if(e)return e;const t=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{localStorage.setItem("web_monitor_session_id",t)}catch(e){}return t}(),this._transport=new t({url:this.config.reportUrl,reportInterval:this.config.reportInterval,batchSize:this.config.batchSize,maxQueueSize:this.config.maxQueueSize,enableImmediateReport:this.config.enableImmediateReport}),this.init()}mergeConfig(e){var t,o,r,n,i,a,s,l,c,u,h,d,p,m,g,f,v;return{appId:e.appId,reportUrl:e.reportUrl,sampling:null!==(t=e.sampling)&&void 0!==t?t:1,debug:null!==(o=e.debug)&&void 0!==o&&o,enablePerformance:null===(r=e.enablePerformance)||void 0===r||r,enableError:null===(n=e.enableError)||void 0===n||n,enableBehavior:null===(i=e.enableBehavior)||void 0===i||i,maxBreadcrumbsNum:null!==(a=e.maxBreadcrumbsNum)&&void 0!==a?a:20,beforeSend:null!==(s=e.beforeSend)&&void 0!==s?s:e=>e,reportInterval:null!==(l=e.reportInterval)&&void 0!==l?l:6e4,batchSize:null!==(c=e.batchSize)&&void 0!==c?c:10,maxQueueSize:null!==(u=e.maxQueueSize)&&void 0!==u?u:100,enableImmediateReport:null===(h=e.enableImmediateReport)||void 0===h||h,performance:{enableBatch:null===(p=null===(d=e.performance)||void 0===d?void 0:d.enableBatch)||void 0===p||p,batchInterval:null!==(g=null===(m=e.performance)||void 0===m?void 0:m.batchInterval)&&void 0!==g?g:5e3,batchSize:null!==(v=null===(f=e.performance)||void 0===f?void 0:f.batchSize)&&void 0!==v?v:10}}}init(){this.shouldSample()&&this.setupErrorHandling()}shouldSample(){return Math.random()<this.config.sampling}setupErrorHandling(){const e=console.error;console.error=(...t)=>{try{e.apply(console,t)}catch(e){}},window.addEventListener("error",()=>{this.safeExecute(()=>{})}),window.addEventListener("unhandledrejection",()=>{this.safeExecute(()=>{})})}safeExecute(e){try{this.isDestroyed||e()}catch(e){this.config.debug&&console.warn("WebMonitorSDK internal error:",e)}}addBreadcrumb(e){this.breadcrumbs.length>=this.config.maxBreadcrumbsNum&&this.breadcrumbs.shift(),this.breadcrumbs.push(e)}report(e){this.safeExecute(()=>{const t={appId:this.config.appId,timestamp:Date.now(),sessionId:this.sessionId,url:window.location.href,userAgent:navigator.userAgent,connectionType:r(),breadcrumbs:[...this.breadcrumbs],...e},o=this.config.beforeSend(t);o&&(this._transport.send(o),this.config.debug&&console.log("WebMonitorSDK Report:",o))})}use(e){this.plugins.has(e.name)?console.warn(`Plugin ${e.name} already installed`):(this.plugins.set(e.name,e),e.install(this))}unuse(e){const t=this.plugins.get(e);t&&t.uninstall&&t.uninstall(this),this.plugins.delete(e)}destroy(){this.isDestroyed=!0,this._transport.destroy(),this.plugins.forEach(e=>{e.uninstall&&e.uninstall(this)}),this.plugins.clear(),this.breadcrumbs=[]}get isDebug(){return this.config.debug}get appId(){return this.config.appId}get currentSessionId(){return this.sessionId}get transport(){return this._transport}getDebugInfo(){return{config:{...this.config},sessionId:this.sessionId,breadcrumbsCount:this.breadcrumbs.length,pluginCount:this.plugins.size,isDestroyed:this.isDestroyed,transportInfo:this._transport.getDebugInfo()}}logDebugInfo(){const e=this.getDebugInfo();console.group("ğŸ” WebMonitorSDK Debug Info"),console.log("ğŸ“‹ åŸºç¡€ä¿¡æ¯:"),console.log(`  â€¢ App ID: ${e.config.appId}`),console.log(`  â€¢ Session ID: ${e.sessionId}`),console.log("  â€¢ æ˜¯å¦å·²é”€æ¯: "+(e.isDestroyed?"âœ…":"âŒ")),console.log("âš™ï¸ ç›‘æ§é…ç½®:"),console.log("  â€¢ è°ƒè¯•æ¨¡å¼: "+(e.config.debug?"âœ…":"âŒ")),console.log("  â€¢ æ€§èƒ½ç›‘æ§: "+(e.config.enablePerformance?"âœ…":"âŒ")),console.log("  â€¢ é”™è¯¯ç›‘æ§: "+(e.config.enableError?"âœ…":"âŒ")),console.log("  â€¢ è¡Œä¸ºç›‘æ§: "+(e.config.enableBehavior?"âœ…":"âŒ")),console.log(`  â€¢ é‡‡æ ·ç‡: ${(100*e.config.sampling).toFixed(1)}%`),console.log("ğŸ“Š è¿è¡ŒçŠ¶æ€:"),console.log(`  â€¢ é¢åŒ…å±‘: ${e.breadcrumbsCount}/${e.config.maxBreadcrumbsNum} æ¡`),console.log(`  â€¢ æ’ä»¶æ•°é‡: ${e.pluginCount} ä¸ª`),console.groupEnd(),this._transport.logDebugInfo(),console.log("ğŸ’¡ è°ƒè¯•å‘½ä»¤:"),console.log("  â€¢ æŸ¥çœ‹è¯¦ç»†ç¼“å­˜: window.WebMonitorSDK.viewCache()"),console.log("  â€¢ æ¸…ç©ºç¼“å­˜: window.WebMonitorSDK.clearCache()"),console.log("  â€¢ æ‰‹åŠ¨ä¸ŠæŠ¥: window.WebMonitorSDK.flush()")}}let i=-1;const a=e=>{addEventListener("pageshow",t=>{t.persisted&&(i=t.timeStamp,e(t))},!0)},s=(e,t,o,r)=>{let n,i;return a=>{t.value>=0&&(a||r)&&(i=t.value-(n??0),(i||void 0===n)&&(n=t.value,t.delta=i,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,o),e(t)))}},l=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},c=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},u=()=>{const e=c();return e?.activationStart??0},h=(e,t=-1)=>{const o=c();let r="navigate";return i>=0?r="back-forward-cache":o&&(document.prerendering||u()>0?r="prerender":document.wasDiscarded?r="restore":o.type&&(r=o.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},d=new WeakMap;function p(e,t){return d.get(e)||d.set(e,new t),d.get(e)}class m{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const t=this.o[0],o=this.o.at(-1);this.i&&t&&o&&e.startTime-o.startTime<1e3&&e.startTime-t.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const g=(e,t,o={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});return r.observe({type:e,buffered:!0,...o}),r}}catch{}},f=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let v=-1;const b=new Set,y=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,w=e=>{if("hidden"===document.visibilityState){if("visibilitychange"===e.type)for(const e of b)e();isFinite(v)||(v="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("prerenderingchange",w,!0))}},R=()=>{if(v<0){const e=u(),t=document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(t=>"hidden"===t.name&&t.startTime>e)[0]?.startTime;v=t??y(),addEventListener("visibilitychange",w,!0),addEventListener("prerenderingchange",w,!0),a(()=>{setTimeout(()=>{v=y()})})}return{get firstHiddenTime(){return v},onHidden(e){b.add(e)}}},S=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},E=[1800,3e3],I=(e,t={})=>{S(()=>{const o=R();let r,n=h("FCP");const i=g("paint",e=>{for(const t of e)"first-contentful-paint"===t.name&&(i.disconnect(),t.startTime<o.firstHiddenTime&&(n.value=Math.max(t.startTime-u(),0),n.entries.push(t),r(!0)))});i&&(r=s(e,n,E,t.reportAllChanges),a(o=>{n=h("FCP"),r=s(e,n,E,t.reportAllChanges),l(()=>{n.value=performance.now()-o.timeStamp,r(!0)})}))})},T=[.1,.25];let D=0,C=1/0,M=0;const B=e=>{for(const t of e)t.interactionId&&(C=Math.min(C,t.interactionId),M=Math.max(M,t.interactionId),D=M?(M-C)/7+1:0)};let O;const P=()=>O?D:performance.interactionCount??0;let _=0;class A{u=[];l=new Map;m;p;v(){_=P(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((P()-_)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&"first-input"!==e.entryType)return;const t=this.u.at(-1);let o=this.l.get(e.interactionId);if(o||this.u.length<10||e.duration>t.P){if(o?e.duration>o.P?(o.entries=[e],o.P=e.duration):e.duration===o.P&&e.startTime===o.entries[0].startTime&&o.entries.push(e):(o={id:e.interactionId,entries:[e],P:e.duration},this.l.set(o.id,o),this.u.push(o)),this.u.sort((e,t)=>t.P-e.P),this.u.length>10){const e=this.u.splice(10);for(const t of e)this.l.delete(t.id)}this.p?.(o)}}}const L=e=>{const t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=f(e),addEventListener("visibilitychange",e,{once:!0,capture:!0}),t(()=>{e(),removeEventListener("visibilitychange",e,{capture:!0})}))},$=[200,500],k=(e,t={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const o=R();S(()=>{"interactionCount"in performance||O||(O=g("event",B,{type:"event",buffered:!0,durationThreshold:0}));let r,n=h("INP");const i=p(t,A),l=e=>{L(()=>{for(const t of e)i.h(t);const t=i.L();t&&t.P!==n.value&&(n.value=t.P,n.entries=t.entries,r())})},c=g("event",l,{durationThreshold:t.durationThreshold??40});r=s(e,n,$,t.reportAllChanges),c&&(c.observe({type:"first-input",buffered:!0}),o.onHidden(()=>{l(c.takeRecords()),r(!0)}),a(()=>{i.v(),n=h("INP"),r=s(e,n,$,t.reportAllChanges)}))})};class N{m;h(e){this.m?.(e)}}const Q=[2500,4e3],K=[800,1800],H=e=>{document.prerendering?S(()=>H(e)):"complete"!==document.readyState?addEventListener("load",()=>H(e),!0):setTimeout(e)};var z,F,x,W;!function(e){e.PERFORMANCE="performance",e.ERROR="error",e.BEHAVIOR="behavior"}(z||(z={})),function(e){e.LCP="LCP",e.INP="INP",e.CLS="CLS",e.FCP="FCP",e.FID="FID",e.TTFB="TTFB",e.NAVIGATION="navigation",e.RESOURCE="resource",e.API="api",e.BATCH="batch"}(F||(F={})),function(e){e.JS_ERROR="js_error",e.PROMISE_ERROR="promise_error",e.RESOURCE_ERROR="resource_error",e.API_ERROR="api_error",e.CUSTOM_ERROR="custom_error"}(x||(x={})),function(e){e.CLICK="click",e.INPUT="input",e.SCROLL="scroll",e.ROUTE_CHANGE="route_change",e.PAGE_VIEW="page_view"}(W||(W={}));class q{constructor(e,t){var o,r,n;this.observer=null,this.performanceQueue=[],this.batchTimer=null,this.batchInterval=5e3,this.batchSize=10,this.batchStartTime=Date.now(),this.enableBatch=!0,this.monitor=e,t&&(this.enableBatch=null===(o=t.enableBatch)||void 0===o||o,this.batchInterval=null!==(r=t.batchInterval)&&void 0!==r?r:5e3,this.batchSize=null!==(n=t.batchSize)&&void 0!==n?n:10),this.init(),this.enableBatch&&this.startBatchTimer()}init(){this.collectWebVitals(),this.collectNavigationTiming(),this.collectResourceTiming(),this.collectAPITiming()}collectWebVitals(){((e,t={})=>{S(()=>{const o=R();let r,n=h("LCP");const i=p(t,N),c=e=>{t.reportAllChanges||(e=e.slice(-1));for(const t of e)i.h(t),t.startTime<o.firstHiddenTime&&(n.value=Math.max(t.startTime-u(),0),n.entries=[t],r())},d=g("largest-contentful-paint",c);if(d){r=s(e,n,Q,t.reportAllChanges);const o=f(()=>{c(d.takeRecords()),d.disconnect(),r(!0)}),i=e=>{e.isTrusted&&(L(o),removeEventListener(e.type,i,{capture:!0}))};for(const e of["keydown","click","visibilitychange"])addEventListener(e,i,{capture:!0});a(o=>{n=h("LCP"),r=s(e,n,Q,t.reportAllChanges),l(()=>{n.value=performance.now()-o.timeStamp,r(!0)})})}})})(e=>{this.reportMetric({type:F.LCP,name:"LCP",value:e.value,rating:e.rating,delta:e.delta,entries:e.entries})}),k(e=>{this.reportMetric({type:F.INP,name:"INP",value:e.value,rating:e.rating,delta:e.delta,entries:e.entries})}),((e,t={})=>{const o=R();I(f(()=>{let r,n=h("CLS",0);const i=p(t,m),c=e=>{for(const t of e)i.h(t);i.i>n.value&&(n.value=i.i,n.entries=i.o,r())},u=g("layout-shift",c);u&&(r=s(e,n,T,t.reportAllChanges),o.onHidden(()=>{c(u.takeRecords()),r(!0)}),a(()=>{i.i=0,n=h("CLS",0),r=s(e,n,T,t.reportAllChanges),l(()=>r())}),setTimeout(r))}))})(e=>{this.reportMetric({type:F.CLS,name:"CLS",value:e.value,rating:e.rating,delta:e.delta,entries:e.entries})}),I(e=>{this.reportMetric({type:F.FCP,name:"FCP",value:e.value,rating:e.rating,delta:e.delta,entries:e.entries})}),((e,t={})=>{let o=h("TTFB"),r=s(e,o,K,t.reportAllChanges);H(()=>{const n=c();n&&(o.value=Math.max(n.responseStart-u(),0),o.entries=[n],r(!0),a(()=>{o=h("TTFB",0),r=s(e,o,K,t.reportAllChanges),r(!0)}))})})(e=>{this.reportMetric({type:F.TTFB,name:"TTFB",value:e.value,rating:e.rating,delta:e.delta,entries:e.entries})})}collectNavigationTiming(){window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];if(!e)return;const t={dnsLookup:e.domainLookupEnd-e.domainLookupStart,tcpConnect:e.connectEnd-e.connectStart,sslConnect:e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,domParse:e.domInteractive-e.responseEnd,domContentLoaded:e.domContentLoadedEventEnd-e.fetchStart,loadComplete:e.loadEventEnd-e.fetchStart,firstPaint:this.getFirstPaint(),firstContentfulPaint:this.getFirstContentfulPaint()};this.reportMetric({type:F.NAVIGATION,name:"Navigation Timing",value:t.loadComplete,entries:[e],navigationType:this.getNavigationType("number"==typeof e.type?e.type:0)}),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.PERFORMANCE,category:"navigation",message:"Page loaded",level:"info",data:t})},0)})}collectResourceTiming(){if(PerformanceObserver)try{this.observer=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{if("resource"===e.entryType){const t=e;if(t.name.includes(this.monitor.appId))return;this.reportMetric({type:F.RESOURCE,name:t.name,value:t.duration,entries:[e]}),t.duration>3e3&&this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.PERFORMANCE,category:"resource",message:`Slow resource: ${t.name}`,level:"warning",data:{duration:t.duration,size:t.transferSize||0}})}})}),this.observer.observe({entryTypes:["resource"]})}catch(e){}}collectAPITiming(){const e=window.fetch;window.fetch=async(...t)=>{const o=performance.now(),r="string"==typeof t[0]?t[0]:t[0].url;try{const n=await e.apply(window,t),i=performance.now()-o;return this.reportMetric({type:F.API,name:r,value:i,entries:[]}),i>2e3&&this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.PERFORMANCE,category:"api",message:`Slow API: ${r}`,level:"warning",data:{duration:i,status:n.status}}),n}catch(e){const t=performance.now()-o;throw this.reportMetric({type:F.API,name:r,value:t,entries:[]}),e}};const t=XMLHttpRequest.prototype.open,o=XMLHttpRequest.prototype.send,r=this;XMLHttpRequest.prototype.open=function(e,o,r,n,i){return this._monitor_url=o.toString(),this._monitor_startTime=performance.now(),t.call(this,e,o,null==r||r,n,i)},XMLHttpRequest.prototype.send=function(e){const t=this,n=t._monitor_startTime,i=t._monitor_url;return t.addEventListener("readystatechange",()=>{if(4===t.readyState){const e=performance.now()-n;r&&i&&(r.reportMetric({type:F.API,name:i,value:e,entries:[]}),e>2e3&&r.monitor.addBreadcrumb({timestamp:Date.now(),type:z.PERFORMANCE,category:"api",message:`Slow XHR: ${i}`,level:"warning",data:{duration:e,status:t.status}}))}}),o.call(this,e)}}getFirstPaint(){const e=performance.getEntriesByType("paint").find(e=>"first-paint"===e.name);return e?e.startTime:0}getFirstContentfulPaint(){const e=performance.getEntriesByType("paint").find(e=>"first-contentful-paint"===e.name);return e?e.startTime:0}getNavigationType(e){return["navigate","reload","back_forward","prerender"][e]||"unknown"}startBatchTimer(){this.batchTimer=setInterval(()=>{this.flushBatch()},this.batchInterval)}stopBatchTimer(){this.batchTimer&&(clearInterval(this.batchTimer),this.batchTimer=null)}flushBatch(){if(0===this.performanceQueue.length)return;const e=this.createBatchData();this.monitor.report({type:z.PERFORMANCE,data:e}),this.resetBatch()}createBatchData(){const e=Date.now(),t=[...this.performanceQueue],o=this.generateSummary(t);return{type:F.BATCH,name:"Performance Metrics Batch",count:t.length,startTime:this.batchStartTime,endTime:e,metrics:t,summary:o}}generateSummary(e){const t={vitals:{},navigation:{},resources:{count:0,slowCount:0,totalSize:0},apis:{count:0,slowCount:0,avgDuration:0}};let o=[];return e.forEach(e=>{switch(e.type){case F.LCP:t.vitals.lcp=e.value;break;case F.INP:t.vitals.inp=e.value;break;case F.CLS:t.vitals.cls=e.value;break;case F.FCP:t.vitals.fcp=e.value;break;case F.TTFB:t.vitals.ttfb=e.value;break;case F.NAVIGATION:if(t.navigation.loadComplete=e.value,e.entries&&e.entries[0]){const o=e.entries[0];t.navigation.domContentLoaded=o.domContentLoadedEventEnd-o.fetchStart}break;case F.RESOURCE:if(t.resources.count++,e.value>3e3&&t.resources.slowCount++,e.entries&&e.entries[0]){const o=e.entries[0];t.resources.totalSize=(t.resources.totalSize||0)+(o.transferSize||0)}break;case F.API:t.apis.count++,e.value>2e3&&t.apis.slowCount++,o.push(e.value)}}),o.length>0&&(t.apis.avgDuration=o.reduce((e,t)=>e+t,0)/o.length),t}resetBatch(){this.performanceQueue=[],this.batchStartTime=Date.now()}reportMetric(e){this.enableBatch?(this.performanceQueue.push(e),this.performanceQueue.length>=this.batchSize&&this.flushBatch()):this.monitor.report({type:z.PERFORMANCE,data:e})}flush(){this.enableBatch&&this.flushBatch()}setBatchOptions(e){const t=this.enableBatch;void 0!==e.enableBatch&&(this.enableBatch=e.enableBatch),void 0!==e.batchInterval&&(this.batchInterval=e.batchInterval),void 0!==e.batchSize&&(this.batchSize=e.batchSize),t!==this.enableBatch?this.enableBatch?(this.performanceQueue.length>0&&this.flushBatch(),this.startBatchTimer()):(this.stopBatchTimer(),this.performanceQueue.length>0&&this.flushBatch()):this.enableBatch&&this.batchTimer&&(this.stopBatchTimer(),this.startBatchTimer())}getBatchStatus(){return{enabled:this.enableBatch,queueLength:this.performanceQueue.length,batchInterval:this.batchInterval,batchSize:this.batchSize,startTime:this.batchStartTime}}destroy(){this.stopBatchTimer(),this.enableBatch&&this.performanceQueue.length>0&&this.flushBatch(),this.observer&&(this.observer.disconnect(),this.observer=null),this.performanceQueue=[]}}class U{constructor(e){this.monitor=e,this.originalFetch=window.fetch,this.originalXHROpen=XMLHttpRequest.prototype.open,this.originalXHRSend=XMLHttpRequest.prototype.send,this.init()}init(){this.handleJSError(),this.handlePromiseError(),this.handleResourceError(),this.handleAPIError()}handleJSError(){window.addEventListener("error",e=>{const{message:t,filename:o,lineno:r,colno:n,error:i}=e,a={type:x.JS_ERROR,message:t||"Unknown error",filename:o,lineno:r,colno:n,stack:null==i?void 0:i.stack};this.reportError(a),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"javascript",message:`JS Error: ${t}`,level:"error",data:{filename:o,lineno:r,colno:n}})},!0)}handlePromiseError(){window.addEventListener("unhandledrejection",e=>{let t="Unhandled Promise Rejection",o="";if(e.reason)if(e.reason instanceof Error)t=e.reason.message,o=e.reason.stack||"";else if("string"==typeof e.reason)t=e.reason;else try{t=JSON.stringify(e.reason)}catch(o){t=String(e.reason)}const r={type:x.PROMISE_ERROR,message:t,stack:o};this.reportError(r),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"promise",message:`Promise Error: ${t}`,level:"error",data:{reason:e.reason}})})}handleResourceError(){window.addEventListener("error",e=>{const t=e.target;if(t&&t!==window&&("IMG"===t.tagName||"SCRIPT"===t.tagName||"LINK"===t.tagName||"AUDIO"===t.tagName||"VIDEO"===t.tagName)){const e={type:x.RESOURCE_ERROR,message:`Resource load error: ${t.tagName}`,resourceUrl:t.src||t.href||"",elementSelector:o(t)};this.reportError(e),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"resource",message:`Resource Error: ${t.tagName}`,level:"error",data:{url:e.resourceUrl,element:t.tagName}})}},!0)}handleAPIError(){window.fetch=async(...e)=>{const t="string"==typeof e[0]?e[0]:e[0].url,o=Date.now();try{const r=await this.originalFetch.apply(window,e);if(!r.ok){const e={type:x.API_ERROR,message:`API Error: ${r.status} ${r.statusText}`,resourceUrl:t,statusCode:r.status};this.reportError(e),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"api",message:`API Error: ${t}`,level:"error",data:{status:r.status,statusText:r.statusText,duration:Date.now()-o}})}return r}catch(e){const r={type:x.API_ERROR,message:`Network Error: ${e instanceof Error?e.message:"Unknown error"}`,resourceUrl:t,stack:e instanceof Error?e.stack:void 0};throw this.reportError(r),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"api",message:`Network Error: ${t}`,level:"error",data:{error:e instanceof Error?e.message:String(e),duration:Date.now()-o}}),e}};const e=this;XMLHttpRequest.prototype.open=function(t,o,r,n,i){return this._monitor_url=o.toString(),this._monitor_method=t,this._monitor_startTime=Date.now(),e.originalXHROpen.call(this,t,o,null==r||r,n,i)},XMLHttpRequest.prototype.send=function(t){const o=this,r=o._monitor_url,n=o._monitor_method,i=o._monitor_startTime;return o.addEventListener("error",()=>{const t={type:x.API_ERROR,message:`XMLHttpRequest Error: ${n} ${r}`,resourceUrl:r,statusCode:o.status};e.reportError(t),e.monitor.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"api",message:`XHR Error: ${n} ${r}`,level:"error",data:{method:n,status:o.status,duration:Date.now()-i}})}),o.addEventListener("load",()=>{if(o.status>=400){const t={type:x.API_ERROR,message:`API Error: ${o.status} ${o.statusText}`,resourceUrl:r,statusCode:o.status};e.reportError(t),e.monitor.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"api",message:`XHR ${o.status}: ${n} ${r}`,level:"error",data:{method:n,status:o.status,statusText:o.statusText,duration:Date.now()-i}})}}),e.originalXHRSend.call(this,t)}}reportError(e){this.monitor.report({type:z.ERROR,data:e})}reportCustomError(e,t){const o={type:x.CUSTOM_ERROR,message:e,stack:(new Error).stack,...t};this.reportError(o),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"custom",message:`Custom Error: ${e}`,level:"error",data:t})}destroy(){window.fetch=this.originalFetch,XMLHttpRequest.prototype.open=this.originalXHROpen,XMLHttpRequest.prototype.send=this.originalXHRSend}}class V{constructor(e){this.monitor=e,this.currentUrl=window.location.href,this.startTime=Date.now(),this.init()}init(){this.trackPageView(),this.trackClicks(),this.trackInputs(),this.trackScrolls(),this.trackRouteChanges()}trackPageView(){const e={type:W.PAGE_VIEW,url:this.currentUrl};this.reportBehavior(e),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.BEHAVIOR,category:"navigation",message:`Page view: ${this.currentUrl}`,level:"info",data:{url:this.currentUrl,referrer:document.referrer}})}trackClicks(){document.addEventListener("click",e=>{const t=e.target;if(!t)return;const r={type:W.CLICK,element:t.tagName,selector:o(t),text:(n=t,"INPUT"===n.tagName?n.value||n.placeholder||"":(null===(i=n.textContent)||void 0===i?void 0:i.trim().slice(0,100))||"")};var n,i;this.reportBehavior(r),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.BEHAVIOR,category:"interaction",message:`Click: ${t.tagName}`,level:"info",data:{text:r.text,selector:r.selector}})},!0)}trackInputs(){const e=function(e,t){let o=null;return function(...r){const n=this;o&&clearTimeout(o),o=window.setTimeout(()=>{e.apply(n,r),o=null},t)}}(e=>{const t=e.target;if(!t||"password"===t.type)return;const r={type:W.INPUT,element:t.tagName,selector:o(t),text:"password"===t.type?"***":t.value.slice(0,100)};this.reportBehavior(r),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.BEHAVIOR,category:"interaction",message:`Input: ${t.tagName}`,level:"info",data:{type:t.type,selector:r.selector}})},500);document.addEventListener("input",e,!0),document.addEventListener("change",e,!0)}trackScrolls(){let e=0;const t=function(e,t){let o=null,r=0;return function(...n){const i=Date.now(),a=this;i-r>t?(e.apply(a,n),r=i):(o&&clearTimeout(o),o=window.setTimeout(()=>{e.apply(a,n),r=Date.now(),o=null},t-(i-r)))}}(()=>{const t=window.pageYOffset||document.documentElement.scrollTop,o=window.innerHeight,r=document.documentElement.scrollHeight,n=Math.round((t+o)/r*100);if(n>e&&(e=n,n>=25&&n%25==0)){const e={type:W.SCROLL,text:`${n}%`};this.reportBehavior(e),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.BEHAVIOR,category:"interaction",message:`Scroll: ${n}%`,level:"info",data:{depth:n,scrollTop:t,documentHeight:r}})}},1e3);window.addEventListener("scroll",t,{passive:!0})}trackRouteChanges(){const e=history.pushState,t=history.replaceState,o=(e,t)=>{const o=Date.now()-this.startTime,r={type:W.ROUTE_CHANGE,from:e,to:t,duration:o};this.reportBehavior(r),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.BEHAVIOR,category:"navigation",message:`Route change: ${e} -> ${t}`,level:"info",data:{from:e,to:t,duration:o}}),this.currentUrl=t,this.startTime=Date.now()};history.pushState=function(t,r,n){const i=window.location.href,a=e.apply(this,arguments),s=window.location.href;return i!==s&&o(i,s),a},history.replaceState=function(e,r,n){const i=window.location.href,a=t.apply(this,arguments),s=window.location.href;return i!==s&&o(i,s),a},window.addEventListener("popstate",()=>{const e=window.location.href;o(this.currentUrl,e)}),window.addEventListener("hashchange",()=>{const e=window.location.href;o(this.currentUrl,e)})}reportCustomBehavior(e,t){const o={type:e,...t};this.reportBehavior(o),this.monitor.addBreadcrumb({timestamp:Date.now(),type:z.BEHAVIOR,category:"custom",message:`Custom behavior: ${e}`,level:"info",data:t})}reportBehavior(e){this.monitor.report({type:z.BEHAVIOR,data:e})}destroy(){}}const X={name:"vue",install(e){if("undefined"!=typeof window&&window.Vue){window.Vue.config.errorHandler=(t,o,r)=>{var n,i;const a={type:x.JS_ERROR,message:t.message,stack:t.stack,source:`Vue ${r}`,filename:(null===(n=null==o?void 0:o.$options)||void 0===n?void 0:n.__file)||"Vue Component"};e.report({type:z.ERROR,data:a}),e.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"vue",message:`Vue Error: ${t.message}`,level:"error",data:{info:r,component:(null===(i=null==o?void 0:o.$options)||void 0===i?void 0:i.name)||"Anonymous Component"}})}}if("undefined"!=typeof window&&window.Vue&&window.Vue.version&&window.Vue.version.startsWith("3")){window.Vue.createApp({}).config.errorHandler=(t,o,r)=>{var n,i;const a={type:x.JS_ERROR,message:t.message,stack:t.stack,source:`Vue3 ${r}`,filename:(null===(n=null==o?void 0:o.$options)||void 0===n?void 0:n.__file)||"Vue3 Component"};e.report({type:z.ERROR,data:a}),e.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"vue3",message:`Vue3 Error: ${t.message}`,level:"error",data:{info:r,component:(null===(i=null==o?void 0:o.type)||void 0===i?void 0:i.name)||"Anonymous Component"}})}}}},G={name:"react",install(e){if("undefined"!=typeof window&&window.React){const t=window.React.createElement;window.React.createElement=function(o,r,...n){if("function"==typeof o&&o.prototype&&o.prototype.isReactComponent){const t=o.prototype.componentDidCatch;o.prototype.componentDidCatch=function(r,n){const i={type:x.JS_ERROR,message:r.message,stack:r.stack,source:"React Component",filename:n.componentStack};e.report({type:z.ERROR,data:i}),e.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"react",message:`React Error: ${r.message}`,level:"error",data:{componentStack:n.componentStack,component:o.name||"Anonymous Component"}}),t&&t.call(this,r,n)}}return t.apply(this,arguments)}}if("undefined"!=typeof window&&window.ReactDOM&&window.ReactDOM.createRoot){const t=window.ReactDOM.createRoot;window.ReactDOM.createRoot=function(o,r={}){const n={...r,onRecoverableError:(t,o)=>{const n={type:x.JS_ERROR,message:t.message,stack:t.stack,source:"React Recoverable Error"};e.report({type:z.ERROR,data:n}),e.addBreadcrumb({timestamp:Date.now(),type:z.ERROR,category:"react",message:`React Recoverable Error: ${t.message}`,level:"warning",data:o}),r.onRecoverableError&&r.onRecoverableError(t,o)}};return t.call(this,o,n)}}}};class J{constructor(e){this.isInitialized=!1,/bot|crawler|spider|crawling/i.test(navigator.userAgent)?this.monitor={}:(this.monitor=new n(e),this.init(),window.__webMonitorSDK=this,this.setupGlobalDebugMethods())}init(){var e,t,o;if(this.isInitialized)console.warn("WebMonitorSDK already initialized");else try{if(this.monitor.config.enablePerformance){const r=this.monitor.config.performance;this.performanceMonitor=new q(this.monitor,{enableBatch:null===(e=null==r?void 0:r.enableBatch)||void 0===e||e,batchInterval:null!==(t=null==r?void 0:r.batchInterval)&&void 0!==t?t:5e3,batchSize:null!==(o=null==r?void 0:r.batchSize)&&void 0!==o?o:10})}this.monitor.config.enableError&&(this.errorMonitor=new U(this.monitor)),this.monitor.config.enableBehavior&&(this.behaviorMonitor=new V(this.monitor)),this.isInitialized=!0,this.monitor.isDebug&&console.log("WebMonitorSDK initialized successfully")}catch(e){console.error("Failed to initialize WebMonitorSDK:",e)}}reportError(e,t){this.errorMonitor&&this.errorMonitor.reportCustomError(e,t)}reportBehavior(e,t){this.behaviorMonitor&&this.behaviorMonitor.reportCustomBehavior(e,t)}report(e){this.monitor.report(e)}use(e){return this.monitor.use(e),this}unuse(e){return this.monitor.unuse(e),this}setTag(e,t){this.monitor.tags||(this.monitor.tags={}),this.monitor.tags[e]=t}setContext(e,t){this.monitor.contexts||(this.monitor.contexts={}),this.monitor.contexts[e]=t}destroy(){var e,t,o;this.isInitialized&&(null===(e=this.performanceMonitor)||void 0===e||e.destroy(),null===(t=this.errorMonitor)||void 0===t||t.destroy(),null===(o=this.behaviorMonitor)||void 0===o||o.destroy(),this.monitor.destroy(),this.isInitialized=!1,delete window.__webMonitorSDK,this.monitor.isDebug&&console.log("WebMonitorSDK destroyed"))}getConfig(){return this.monitor.config}getSessionId(){return this.monitor.currentSessionId}flushPerformance(){this.performanceMonitor&&this.performanceMonitor.flush()}setPerformanceBatchOptions(e){this.performanceMonitor&&this.performanceMonitor.setBatchOptions(e)}getPerformanceBatchStatus(){return this.performanceMonitor?this.performanceMonitor.getBatchStatus():null}setupGlobalDebugMethods(){window.WebMonitorSDK={debug:()=>{this.monitor.logDebugInfo()},viewCache:()=>{this.monitor.transport.getStorageManager().logStorageData()},clearCache:()=>{this.monitor.transport.getStorageManager().clear(),console.log("âœ… æœ¬åœ°ç¼“å­˜å·²æ¸…ç©º")},flush:()=>{this.monitor.transport.flush(),console.log("ğŸš€ å·²æ‰‹åŠ¨è§¦å‘æ•°æ®ä¸ŠæŠ¥")},getStatus:()=>{const e=this.monitor.transport.getQueueStatus();return console.table(e),e},getRawData:()=>{const e=this.monitor.transport.getStorageManager().getRawData();return e?(console.log("ğŸ“„ åŸå§‹localStorageæ•°æ®:"),console.log(e),JSON.parse(e)):(console.log("âŒ æ²¡æœ‰å­˜å‚¨æ•°æ®"),null)},getDebugInfo:()=>this.monitor.getDebugInfo(),performance:{flush:()=>{this.flushPerformance(),console.log("ğŸš€ å·²æ‰‹åŠ¨åˆ·æ–°æ€§èƒ½ç›‘æ§æ•°æ®")},getStatus:()=>{const e=this.getPerformanceBatchStatus();return e?(console.table(e),e):(console.log("âŒ æ€§èƒ½ç›‘æ§æœªå¯ç”¨"),null)},setBatch:e=>{this.setPerformanceBatchOptions(e),console.log("âš™ï¸ æ€§èƒ½ç›‘æ§æ‰¹é‡é…ç½®å·²æ›´æ–°:",e)},disableBatch:()=>{this.setPerformanceBatchOptions({enableBatch:!1}),console.log("âŒ æ€§èƒ½ç›‘æ§æ‰¹é‡æ¨¡å¼å·²ç¦ç”¨")},enableBatch:()=>{this.setPerformanceBatchOptions({enableBatch:!0}),console.log("âœ… æ€§èƒ½ç›‘æ§æ‰¹é‡æ¨¡å¼å·²å¯ç”¨")}},help:()=>{console.group("ğŸ”§ WebMonitorSDK è°ƒè¯•å‘½ä»¤"),console.log("åŸºç¡€å‘½ä»¤:"),console.log("  WebMonitorSDK.debug()         - æŸ¥çœ‹å®Œæ•´è°ƒè¯•ä¿¡æ¯"),console.log("  WebMonitorSDK.viewCache()     - æŸ¥çœ‹è¯¦ç»†ç¼“å­˜æ•°æ®"),console.log("  WebMonitorSDK.clearCache()    - æ¸…ç©ºæœ¬åœ°ç¼“å­˜"),console.log("  WebMonitorSDK.flush()         - æ‰‹åŠ¨è§¦å‘æ•°æ®ä¸ŠæŠ¥"),console.log("  WebMonitorSDK.getStatus()     - è·å–é˜Ÿåˆ—çŠ¶æ€"),console.log("  WebMonitorSDK.getRawData()    - æŸ¥çœ‹åŸå§‹localStorageæ•°æ®"),console.log("  WebMonitorSDK.getDebugInfo()  - è·å–è°ƒè¯•ä¿¡æ¯å¯¹è±¡"),console.log(""),console.log("æ€§èƒ½ç›‘æ§å‘½ä»¤:"),console.log("  WebMonitorSDK.performance.flush()        - åˆ·æ–°æ€§èƒ½æ•°æ®"),console.log("  WebMonitorSDK.performance.getStatus()    - è·å–æ€§èƒ½æ‰¹é‡çŠ¶æ€"),console.log("  WebMonitorSDK.performance.setBatch(opts) - è®¾ç½®æ‰¹é‡é…ç½®"),console.log("  WebMonitorSDK.performance.enableBatch()  - å¯ç”¨æ‰¹é‡æ¨¡å¼"),console.log("  WebMonitorSDK.performance.disableBatch() - ç¦ç”¨æ‰¹é‡æ¨¡å¼"),console.log(""),console.log("  WebMonitorSDK.help()          - æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯"),console.groupEnd()}},this.monitor.isDebug&&(console.log("ğŸ”§ WebMonitorSDK è°ƒè¯•æ¨¡å¼å·²å¯ç”¨"),console.log("ğŸ’¡ ä½¿ç”¨ WebMonitorSDK.help() æŸ¥çœ‹å¯ç”¨çš„è°ƒè¯•å‘½ä»¤"))}}function j(e){return new J(e)}export{W as BehaviorType,z as DataType,x as ErrorType,F as PerformanceType,G as ReactPlugin,X as VuePlugin,J as WebMonitorSDK,j as createWebMonitorSDK,J as default};
